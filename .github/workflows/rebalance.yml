name: Monthly Momentum Rebalance

on:
  schedule:
    # At 14:00 UTC on the first trading day of each month
    - cron:  '0 14 1 * *'

jobs:
  rebalance:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
      - name: Install requirements
        run: pip install alpaca-trade-api pandas numpy
      - name: Run rebalance
        env:
          APCA_API_KEY_ID: ${{ secrets.APCA_API_KEY_ID }}
          APCA_API_SECRET_KEY: ${{ secrets.APCA_API_SECRET_KEY }}
        run: python momentum.py
